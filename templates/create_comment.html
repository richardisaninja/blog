{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags %}
{% load widget_tweaks %}
{% block title %} Create Comment {% endblock %}


{% block custom_files %}

{% endblock %}


{% block custom_css %}

{% endblock %}


{% block custom_js %}

{% endblock %}


{% block header %}

{% endblock %}


{% block content %}
    
<div class="main-sec">
        <nav>
                <ul class="nav">
                    <li>.blog_logo</li>
                    <li>Add Comment</li>
                    <li><div class="create"><a href="{% url 'post_view' %}">View Posts</a></div></li>
                </ul>
            </nav>

           <div class="row">
            <div class="col-md-4"></div>
                <div class="col-md-4">   
                    <form method="post"  onsubmit="" name="myForm" action="">
                        {% csrf_token %}
                        <br>
                      
                        {{ form.content }}
                        
                        <br>

                        <button type="submit"> Submit</button>
                    </form>
                </div>
                <div class="col-md-4"></div>
            </div>
        </div>

        <script>

            var on_submit_function = function(evt){
                evt.preventDefault(); //The form wouln't be submitted Yet.
                var y = document.forms["myForm"]["content"].value;

    
                var x = document.forms["myForm"]["title"].value;
                var y = document.forms["myForm"]["content"].value;
                if (x == "" || x.length<5) {
                    alert("Title must be more than 5 characters");
                    return false;
                    }
                    if (y == "" || y.length<5) {
                        alert("Content must be more than 5 characters");
                        return false;
                }
                else{
                    swal('Your Content is being submitted', '', 'success');
                    $('.swal-modal').click(function(){
                        $('form').off('submit', on_submit_function); //It will remove this handle and will submit the form again if it's all ok.
                
                         $('form').submit();
                    })
                }
                
                
            }

$('form').on('submit', on_submit_function); //Registering on submit.


        
        </script>
{% endblock %}

{% block footer_content %}

{% endblock %}